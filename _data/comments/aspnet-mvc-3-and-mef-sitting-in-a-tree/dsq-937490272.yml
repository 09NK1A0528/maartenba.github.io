id: dsq-937490272
date: 2010-10-29T11:03:48.0000000+02:00
name: Al
avatar: https://disqus.com/api/users/avatars/Al.jpg
message: '<p>[Export(typeof(IControllerFactory))]<br>    [PartCreationPolicy(CreationPolicy.Shared)]<br>    public class ServiceLocatorControllerFactory<br>        : DefaultControllerFactory<br>    {<br>        private IDependencyResolver serviceLocator;</p><p>        [ImportingConstructor]<br>        public ServiceLocatorControllerFactory(IDependencyResolver serviceLocator)<br>        {<br>            this.serviceLocator = serviceLocator;<br>        }</p><p>        public override IController CreateController(RequestContext requestContext, string controllerName)<br>        {<br>            var controllerType = GetControllerType(requestContext, controllerName);<br>            if (controllerType != null)<br>            {<br>                return this.serviceLocator.GetInstance(controllerType) as IController;<br>            }</p><p>            return base.CreateController(requestContext, controllerName);<br>        }</p><p>        public override void ReleaseController(IController controller)<br>        {<br>            this.serviceLocator.Release(controller);<br>        }<br>    }</p>'
