id: dsq-937490736
date: 2009-02-23T15:07:01.0000000+01:00
name: maartenba
avatar: https://disqus.com/api/users/avatars/maartenba.jpg
message: <p>James, here's an answer in code format :-)</p><p>[AcceptVerbs(HttpVerbs.Post)]<br>public ActionResult Create(FormCollection collection)<br>{<br>    Note note = new Note();</p><p>    try<br>    {<br>        UpdateModel(<br>            note, <br>            new string[] { "Title", "Body" },<br>            collection.ToValueProvider()<br>        );</p><p>        noteRepository.Save(note, User.Identity.Name);</p><p>        return RedirectToAction("List");<br>    }<br>    catch (InvalidOperationException ex)<br>    {<br>        // ...................................................<br>        // Model binding went wrong...<br>        //<br>        // You can add some code here for validating tha values<br>        // provided, or pass the formCollection.ToValueProvider()<br>        // to the Note class.<br>        //<br>        // In there, you can set the ModelState errors.<br>        //<br>        // Example:<br>        //   note.AddModelStateErrors( formCollection.ToValueProvider(), ModelState );<br>        // ...................................................</p><p>        return View(note);<br>    }<br>}</p>
