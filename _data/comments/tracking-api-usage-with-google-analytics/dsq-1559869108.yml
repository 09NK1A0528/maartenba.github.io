id: dsq-1559869108
replyToId: dsq-1559860854
date: 2014-08-26T15:23:42.0000000+02:00
name: Fred .
avatar: https://disqus.com/api/users/avatars/disqus_UewjzPq6jN.jpg
message: '<p>App_Start\WebApiConfig.cs</p><p>Works. Uses <code>action.ControllerContext.ControllerDescriptor.ControllerName</code><br></p><pre><code><br>using System;<br>using System.Collections.Generic;<br>using System.Linq;<br>using System.Net.Http;<br>using System.Web.Http;<br>using GoogleAnalyticsTracker.WebApi2;<br>using Microsoft.Owin.Security.OAuth;<br>using Newtonsoft.Json.Serialization;<br><br>namespace throwaway_webapi<br>{<br>    public static class WebApiConfig<br>    {<br>        public static void Register(HttpConfiguration config)<br>        {<br>            // Web API configuration and services<br>            // Configure Web API to use only bearer token authentication.<br>            config.SuppressDefaultHostAuthentication();<br>            config.Filters.Add(new HostAuthenticationFilter(OAuthDefaults.AuthenticationType));<br>            config.Filters.Add(new ActionTrackingAttribute(<br>                "UA-XXXXXX-XX", "www.example.org",<br>                action =&gt; action.ControllerContext.ControllerDescriptor.ControllerName == "Api")<br>                );<br><br>            // Web API routes<br>            config.MapHttpAttributeRoutes();<br><br>            config.Routes.MapHttpRoute(<br>                name: "DefaultApi",<br>                routeTemplate: "api/{controller}/{id}",<br>                defaults: new { id = RouteParameter.Optional }<br>            );<br>        }<br>    }<br>}<br></code></pre><p></p><p>Does not resolve symbol ControllerDescriptor.<br>Uses <code>action.ControllerContext.ControllerName</code><br></p><pre><code><br>using System;<br>using System.Collections.Generic;<br>using System.Linq;<br>using System.Net.Http;<br>using System.Web.Http;<br>using GoogleAnalyticsTracker.WebApi2;<br>using Microsoft.Owin.Security.OAuth;<br>using Newtonsoft.Json.Serialization;<br><br>namespace throwaway_webapi<br>{<br>    public static class WebApiConfig<br>    {<br>        public static void Register(HttpConfiguration config)<br>        {<br>            // Web API configuration and services<br>            // Configure Web API to use only bearer token authentication.<br>            config.SuppressDefaultHostAuthentication();<br>            config.Filters.Add(new HostAuthenticationFilter(OAuthDefaults.AuthenticationType));<br>            config.Filters.Add(new ActionTrackingAttribute(<br>                "UA-XXXXXX-XX", "www.example.org",<br>                action =&gt; action.ControllerDescriptor.ControllerName == "Api")<br>                );<br><br>            // Web API routes<br>            config.MapHttpAttributeRoutes();<br><br>            config.Routes.MapHttpRoute(<br>                name: "DefaultApi",<br>                routeTemplate: "api/{controller}/{id}",<br>                defaults: new { id = RouteParameter.Optional }<br>            );<br>        }<br>    }<br>}<br></code></pre>'
