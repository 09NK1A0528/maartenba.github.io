id: dsq-937491385
replyToId: dsq-937490577
date: 2009-04-16T14:20:39.0000000+02:00
name: maartenba
avatar: https://disqus.com/api/users/avatars/maartenba.jpg
message: '<p>Well, the first method is the one that is executed before starting the new thread. In here, you can fetch some parameters, for example:</p><p>public void Details(int productId) { }</p><p>This method can then start a new thread:</p><p>public void Details(int productId) { <br>    // If you need productId in the method that renders the view, pass it on in here: <br>    // AsyncManager.Parameters["productId"] = productId;</p><p>    // Add an asynchronous operation <br>    AsyncManager.OutstandingOperations.Increment(); <br>    ThreadPool.QueueUserWorkItem(o =&gt; <br>    { <br>        // ... fetch product details from database, based on productId ...<br>        // ... pass the fetched product to the method that renders the view ...<br>        AsyncManager.Parameters["product"] = productFromDatabase;</p><p>        AsyncManager.OutstandingOperations.Decrement(); <br>    }, null); <br>}</p><p>Next, when the thread has finished, this one is called:</p><p>public ActionResult DetailsCompleted() { <br>    // The product we fetched on another thread:<br>    ViewData["Product"] = AsyncManager.Parameters["product"];</p><p>    // Return the view <br>    return View("Details"); <br>}</p><p>Hope this answers your question, if not, do not hesitate to ask.</p>'
