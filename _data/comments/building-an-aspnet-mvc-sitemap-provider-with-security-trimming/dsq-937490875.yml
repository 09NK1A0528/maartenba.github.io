id: dsq-937490875
date: 2008-10-21T21:24:05.0000000+02:00
name: Jason Plante
avatar: https://disqus.com/api/users/avatars/Jason Plante.jpg
message: "<p>I am experiencing the same issue that Matt Bertulli brought up.</p><p>Line 438: smNode.Url = \"/\" + routeData.Route.GetVirtualPath(handler.RequestContext, new RouteValueDictionary(routeValues)).VirtualPath;</p><p>I've tried looking through the source code myself to see if I can fix it or at least find the culprit.  From what I can see, after some kind of application cycles (write to web.config / iis restart / cache expiry) requests outside the route generate this error.  The root of the error seems to come from this line of code inside of the GetMvcSiteMapNodeFromXMLElement(XElement node) method:</p><p>// slightly modified (broken apart)<br>VirtualPathData virtualPathData = routeBase.GetVirtualPath(requestContext, routeValueDictionary);<br>string virtualPath = virtualPathData.VirtualPath;</p><p>...because the return value of GetVirtualPath is null, so the object virtualPathData is a null reference.  So something in the routeBase, requestContext or routeValueDictionary must be off.  Any help would be very much appreciated.  This has been a very very useful framework thus far.</p>"
